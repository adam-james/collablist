<h1> Search </h1>

<%= form_for @conn, Routes.dashboard_playlist_search_path(@conn, :index, @playlist), [method: :get], fn f -> %>
  <%= text_input f, :q %>

  <div>
    <%= submit "Search" %>
  </div>
<% end %>

<h2>Results</h2>

<%= if Enum.any?(@items) do %>
  <ul>
  <%= for item <- @items do %>
    <li>
      <%= item.name %>
      <ul>
      <%= for artist <- item.artists do %>
        <li><%= artist["name"] %></li>
      <% end %>
      </ul>
      <%= form_for @conn, Routes.dashboard_playlist_track_path(@conn, :create, @playlist), fn f -> %>
        <%= hidden_input f, :spotify_id, value: item.id %>

        <div>
          <%= submit "Add To Playlist" %>
        </div>
      <% end %>
    </li>
  <% end %>
  </ul>
<% end %>
